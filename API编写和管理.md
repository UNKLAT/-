API编写

编写契约（即 API）。即规定好 API 请求的 URL、请求内容、返回结果、鉴权方式等等。根据API编写 Mock Server。然后 Moco编写集成测试将请求发给这个 Mock Server，并验证

目前据我已知的api管理方式广义上有两种

1.直接使用，该种最直白，在直接使用时候方便，即直接在需要使用后端服务的页面中发起请求，然后获取数据；但是这种方式，在api要在多处使用的时候会造成要在多处写相同的api，后期修改也麻烦，页面的代码也多

2.将api集中在一处统一管理，需要使用的时候，通过引入api调用；但该方式又有几种不同的使用方式

（1）创建一个api.js，将项目的所有api写在该文件上，然后在需要使用的页面按需导入，常用于简单的小型项目

（2）在api接口创建的逻辑都通用的情况下，可以创建一个通用生成api的函数createAPI(url)，然后创建一个js文件用于保存项目的url，然后通过调用createAPI(url)生成我们需要的api，然后使用的页面按需导入

（3）当项目比较大型，需要多人协作的时候，为避免多人修改同一个文件，故而一般会将api根据功能细分，然后在划分的目录下创建一个页面的api的js文件，例如：目前需要制作一个后台管理系统，在功能上存在用户管理页面userManagement，而用户管理归属于安全管理这一大功能模块下，那么在api目录下创建一个安全管理目录（和创建页面的逻辑一致）safeManagement，然后在该目录下创建userManagement.js保存用户管理页面的api

（4）该点可以说是第3的变种，即是我们将完全独立统一管理的api模块，根据功能划分，在各自的功能模块中创建api文件

因为api中一般对请求不做任何处理，即是简单调用封装的get或者post，对错误进行处理，并返回，可以说实际上统一管理url，例如

但以上都会产生冗余代码，而且（3）（4）还会产生大量文件，每个页面还需要导入一遍，操作麻烦。依照规范而言，应当采用（3）的，但是目前而言，如此做法的优点仅仅是修改url方便，可复用api，而目前实际开发中，遇到的api往往是一个页面使用，其他页面不使用的。

实际生产开发应当使用（3）